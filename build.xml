<project default="jar">
	<property name="targetdir" value="bin"/>
	<property name="srcdir"    value="src"/>

	<fileset id="srcfiles" dir="${srcdir}" includes="**/*.java"/>

	<target name="compile">
		<mkdir dir="${targetdir}"/>
		<javac
			srcdir="src"
			destdir="${targetdir}"
			source="1.6" target="1.6"
			classpath="."
			encoding="UTF-8"
			debug="on"
		>
			<include name="**/*.java"/>
			<compilerarg compiler="modern" value="-Xlint:all,-serial"/>
		</javac>
	</target>
	<target name="jar" depends="compile">
		<jar destfile="hadoop-bam.jar" basedir="${targetdir}">
			<include name="**/*.class"/>
			<manifest>
				<attribute name="Main-Class"
					value="fi.tkk.ics.hadoop.bam.cli.Frontend"/>
			</manifest>
			<service type="fi.tkk.ics.hadoop.bam.cli.CLIPlugin">
				<provider classname="fi.tkk.ics.hadoop.bam.cli.plugins.View"/>
			</service>
		</jar>
	</target>
	<target name="clean">
		<delete>
			<fileset dir="${targetdir}" includes="**/*.class"/>
		</delete>
	</target>
	<target name="javadoc">
		<javadoc
			destdir="doc"
			locale="en_GB"
			   encoding="UTF-8"
			docencoding="UTF-8"
			source="1.6"
			linksource="yes"
			breakiterator="yes"
			windowtitle="hadoop-bam API documentation"
		>
			<fileset refid="srcfiles"/>
		</javadoc>
	</target>
</project>
